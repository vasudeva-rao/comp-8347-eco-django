{% extends 'base.html' %}
{% block title %}{{ tip.title }}{% endblock %}
{% block content %}
<h2>{{ tip.title }}</h2>
<p>{{ tip.description }}</p>
<p><span class="badge bg-success">{{ tip.get_category_display }}</span></p>
<p><strong>Date Added:</strong> {{ tip.date_added|date:"M d, Y H:i" }}</p>
{% if tip.file %}
    <div class="mb-3">
        {% if tip.file.url|lower|slice:'-4:' == '.jpg' or tip.file.url|lower|slice:'-5:' == '.jpeg' or tip.file.url|lower|slice:'-4:' == '.png' or tip.file.url|lower|slice:'-4:' == '.gif' %}
            <img src="{{ tip.file.url }}" alt="Tip Image" class="img-fluid mb-2" style="max-width:300px;">
        {% else %}
            <a href="{{ tip.file.url }}" target="_blank">View attached file</a>
        {% endif %}
    </div>
{% endif %}
{% if user.is_authenticated %}
    {% with bookmarks=request.session.bookmarks %}
        {% if tip.pk in bookmarks %}
            <form action="/unbookmark/{{ tip.pk }}/" method="post" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-outline-danger">Remove Bookmark</button>
            </form>
        {% else %}
            <form action="/bookmark/{{ tip.pk }}/" method="post" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-outline-secondary">Bookmark</button>
            </form>
        {% endif %}
    {% endwith %}
{% endif %}
{% if user.is_staff %}
    <a href="/tip/{{ tip.pk }}/edit/" class="btn btn-warning">Edit</a>
    <a href="/tip/{{ tip.pk }}/delete/" class="btn btn-danger">Delete</a>
{% endif %}
<a href="/tips/" class="btn btn-link">Back to Tips</a>
{% endblock %} 